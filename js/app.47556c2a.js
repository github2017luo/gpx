(function(t){function e(e){for(var n,r,s=e[0],c=e[1],l=e[2],d=0,f=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&f.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(f.length)f.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,s=1;s<a.length;s++){var c=a[s];0!==i[c]&&(n=!1)}n&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},i={app:0},o=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/gpx/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("cd49")},"034f":function(t,e,a){"use strict";var n=a("85ec"),i=a.n(n);i.a},"07fc":function(t,e,a){"use strict";var n=a("68f1"),i=a.n(n);i.a},1:function(t,e){},2:function(t,e){},3027:function(t,e,a){"use strict";var n=a("61aa"),i=a.n(n);i.a},5490:function(t,e,a){"use strict";var n=a("a6b6"),i=a.n(n);i.a},"61aa":function(t,e,a){},"68f1":function(t,e,a){},"85ec":function(t,e,a){},a6b6:function(t,e,a){},cd49:function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("Map",{staticClass:"map"})],1)},o=[],r=a("d4ec"),s=a("bee2"),c=a("99de"),l=a("7e84"),u=a("262e"),d=a("9ab4"),f=a("60a3"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"map outer"},[a("div",{staticClass:"map-content",attrs:{id:"map"}}),a("Info",{staticClass:"info-content",attrs:{message:t.infoText},on:{"size-to-track":function(e){return t.sizeToTrack(e)}}})],1)},p=[],m=(a("99af"),a("4de4"),a("d81d"),a("fb6a"),a("b0c0"),a("4ec9"),a("d3b7"),a("25f0"),a("6062"),a("3ca3"),a("159b"),a("ddb0"),a("ade3")),v=a("2909"),g=a("e11e"),y=a.n(g),b=(a("a15b"),a("4d90"),a("1315")),k=function(){function t(){Object(r["a"])(this,t)}return Object(s["a"])(t,[{key:"nowWithMsecs",value:function(){return b["DateTime"].local().toFormat("HH:mm:ss.SSS")}},{key:"durationAsSeconds",value:function(t,e){return Math.round((e.getTime()-t.getTime())/1e3)}},{key:"secondsToDuration",value:function(t){var e=Math.floor(t/3600),a=Math.floor((t-3600*e)/60),n=t-3600*e-60*a;return"".concat(e.toString().padStart(2,"0"),":").concat(a.toString().padStart(2,"0"),":").concat(n.toString().padStart(2,"0"))}},{key:"durationGpx",value:function(t){return this.duration(t.startDate,t.endDate)}},{key:"durationPoints",value:function(t,e){return this.duration(t.timestamp,e.timestamp)}},{key:"duration",value:function(t,e){var a=b["DateTime"].fromISO(e.toISOString()),n=b["DateTime"].fromISO(t.toISOString()),i=a.diff(n,["hours","minutes","seconds"]).toObject();return"".concat(i.hours,":").concat(this.pad(i.minutes||0,2),":").concat(this.pad(i.seconds||0,2))}},{key:"distance",value:function(t){return this.distanceKilometers(t.meters)}},{key:"distanceMeters",value:function(t){return this.distanceKilometers(t/1e3)}},{key:"distanceKilometers",value:function(t){return t<.001?"".concat(Math.round(1e3*t*100)/100," meters"):t<1?"".concat(t<.01?Math.round(1e3*t*10)/10:Math.round(1e3*t)," meters"):"".concat(Math.round(100*t)/100," km")}},{key:"pad",value:function(t,e){return t.toString().padStart(e,"0")}},{key:"speed",value:function(t,e){var a=e/(t/3600);return"".concat(Math.round(10*a)/10," km/h")}},{key:"speedKmh",value:function(t){return"".concat(Math.round(10*t)/10," km/h")}},{key:"dayOfWeek",value:function(t,e){return this.dateTime(t,e).weekdayLong}},{key:"date",value:function(t,e){return this.dateTime(t,e).toLocaleString({locale:"en-US"})}},{key:"timeWithSeconds",value:function(t,e){return this.dateTime(t,e).toFormat("HH:mm.ss")}},{key:"shortTime",value:function(t,e){return this.dateTime(t,e).toFormat("HH:mmÂ a")}},{key:"shortTimezoneName",value:function(t){return b["DateTime"].utc().setZone(t).offsetNameShort}},{key:"dateTime",value:function(t,e){var a;return a=t instanceof Date?t.toISOString():t.toString(),b["DateTime"].fromISO(a,{zone:e})}},{key:"join",value:function(t){return t.join(", ")}},{key:"firstFew",value:function(t){if(!t)return"";var e=t.slice(0,2).join(", ");return t.length>2&&(e+=", ..."),e}}]),t}(),T=new k,w=function(){function t(){Object(r["a"])(this,t)}return Object(s["a"])(t,null,[{key:"normalizeDegrees",value:function(t){return t>=0&&t<=360?t:t>360?t-360:t<0?t+360:t}},{key:"distanceGpx",value:function(t,e){return this.distanceLL(t.latitude,t.longitude,e.latitude,e.longitude)}},{key:"distanceSegment",value:function(t,e){for(var a=0,n=1;n<t.points.length&&t.points[n].timestamp<=e.timestamp;++n)a+=this.distanceGpx(t.points[n-1],t.points[n]);return a}},{key:"distanceLL",value:function(t,e,a,n){var i=this.toRad(a-t),o=this.toRad(n-e),r=this.toRad(t),s=this.toRad(a),c=Math.sin(i/2)*Math.sin(i/2)+Math.sin(o/2)*Math.sin(o/2)*Math.cos(r)*Math.cos(s),l=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c));return this.earthRadiusMeters*l}},{key:"toRad",value:function(t){return t*Math.PI/180}},{key:"toDegrees",value:function(t){return 180*t/Math.PI}},{key:"bearing",value:function(e,a,n,i){var o=t.toRad(e),r=t.toRad(a),s=t.toRad(n),c=t.toRad(i),l=Math.sin(c-r)*Math.cos(s),u=Math.cos(o)*Math.sin(s)-Math.sin(o)*Math.cos(s)*Math.cos(c-r),d=t.toDegrees(Math.atan2(l,u));return(d+360)%360}},{key:"pointAlongBearing",value:function(t,e,a,n){var i=this.toRad(a),o=n/this.earthRadiusMeters,r=this.toRad(t),s=this.toRad(e),c=Math.sin(r)*Math.cos(o)+Math.cos(r)*Math.sin(o)*Math.cos(i),l=Math.asin(c),u=Math.sin(i)*Math.sin(o)*Math.cos(r),d=Math.cos(o)-Math.sin(r)*c,f=s+Math.atan2(u,d);return{lat:this.toDegrees(l),lon:this.toDegrees(f)}}},{key:"nearestPoint",value:function(e,a,n){var i=this,o=e[0],r=this.distanceLL(o.latitude,o.longitude,a,n),s=0,c={latitude:a,longitude:n,timestamp:new Date};e.forEach((function(a,n){n>0&&(s+=i.distanceGpx(e[n],a));var l=t.distanceGpx(a,c);l<r&&(r=l,o=a)}));var l=T.duration(e[0].timestamp,o.timestamp),u=T.distanceMeters(s);return{point:o,distance:u,duration:l}}},{key:"earthRadiusMeters",get:function(){return 6372800}}]),t}(),x=function(){function t(e,a,n){var i=this;Object(r["a"])(this,t),this.arrowAngle=160,this.arrowLengthMeters=45,this.arrowOptions={fill:!0,color:"#000000",opacity:1,fillColor:"#8A2BE2",fillOpacity:1,weight:2,stroke:!0,lineCap:"square",lineJoin:"miter",className:"gpx-viewer-arrow-polyline"};var o=this.arrowIndices(a);this.arrows=o.map((function(t){var e=a.points[t],o=a.points[t-1],r=w.bearing(o.latitude,o.longitude,e.latitude,e.longitude);return i.createArrowLine(e.latitude,e.longitude,r,n)}))}return Object(s["a"])(t,[{key:"addTo",value:function(t){return this.arrows.forEach((function(e){e.addTo(t)})),this}},{key:"createArrowLine",value:function(t,e,a,n){var i=w.pointAlongBearing(t,e,(a+this.arrowAngle+360)%360,this.arrowLengthMeters),o=w.pointAlongBearing(t,e,(a-this.arrowAngle+360)%360,this.arrowLengthMeters);return new y.a.Polyline([[i.lat,i.lon],[t,e],[o.lat,o.lon],[i.lat,i.lon]],this.arrowOptions)}},{key:"arrowIndices",value:function(t){var e=t.points.length;if(e<3)return[];if(e<420)return[Math.floor(e/2)];if(e<900)return[Math.floor(e/3),Math.floor(2*e/3)];var a=t.points[10],n=[];return t.points.forEach((function(t,e){var i=T.durationAsSeconds(a.timestamp,t.timestamp),o=w.distanceGpx(a,t);i>300&&o>400&&(n.push(e),a=t)})),n}}]),t}(),S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block"},[t.isLoading?a("div",{staticClass:"modal-background is-full-page",staticStyle:{"z-index":"1001"}},[t._m(0)]):t._e(),a("b-collapse",{staticClass:"panel",attrs:{open:t.isOpen,"aria-id":"content-id"},on:{"update:open":function(e){t.isOpen=e}}},[a("div",{staticClass:"panel-heading no-border no-background-color has-text-white",attrs:{slot:"trigger",role:"button","aria-controls":"content-id"},slot:"trigger"},[a("b-icon",{staticClass:"left-padding align-items-inherit",attrs:{icon:t.isOpen?"caret-down":"caret-up"}}),a("span",{staticClass:"left-padding is-size-4"},[t._v(" "+t._s(t.headerText)+" ")]),a("b-button",{staticClass:"is-pulled-right",attrs:{"icon-left":"route",type:"is-success"},on:{click:t.addTrack}},[t._v("Add a track")])],1),t.activeTracks>0?a("div",{staticClass:"track-container"},[a("b-tabs",{attrs:{type:"is-boxed",vertical:""},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("b-tab-item",{attrs:{icon:"info"}},[a("div",{staticClass:"info-text-content is-size-5"},[a("div",[t._v(" "+t._s(t.infoFiles)+" ")]),a("div",[t._v(" "+t._s(t.infoDateAndTime)+" ")]),a("div",[t._v(" "+t._s(t.infoDistance)+" ")]),a("div",[t._v(" "+t._s(t.infoDuration)+" ")])])]),a("b-tab-item",{attrs:{icon:"route"}},[a("b-table",{attrs:{data:t.gpxStore.files},scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-table-column",{attrs:{field:"size",label:"",centered:""}},[a("b-button",{attrs:{"icon-left":"vector-square",size:"is-small"},on:{click:function(a){return t.sizeToTrack(e.row)}}})],1),a("b-table-column",{attrs:{field:"name",label:"Name",centered:""}},[t._v(" "+t._s(e.row.name)+" ")]),a("b-table-column",{attrs:{field:"distance",label:"Distance",centered:""}},[t._v(" "+t._s(t.displayable.distanceMeters(e.row.meters))+" ")]),a("b-table-column",{attrs:{field:"date",label:"Date",centered:""}},[t._v(" "+t._s(t.displayable.dayOfWeek(e.row.startDate,e.row.timezoneName))+", "+t._s(t.displayable.date(e.row.startDate,e.row.timezoneName))+" ")]),a("b-table-column",{attrs:{field:"start",label:"Start",centered:""}},[t._v(" "+t._s(t.displayable.shortTime(e.row.startDate,e.row.timezoneName))+", "+t._s(t.displayable.shortTimezoneName(e.row.timezoneName))+" ")]),a("b-table-column",{attrs:{field:"end",label:"End",centered:""}},[t._v(" "+t._s(t.displayable.shortTime(e.row.endDate,e.row.timezoneName))+", "+t._s(t.displayable.shortTimezoneName(e.row.timezoneName))+" ")]),a("b-table-column",{attrs:{field:"duration",label:"Duration",centered:""}},[t._v(" "+t._s(t.displayable.durationGpx(e.row))+" ")]),a("b-table-column",{attrs:{field:"remove",label:"",centered:""}},[a("b-button",{attrs:{"icon-left":"trash",type:"is-danger",size:"is-small"},on:{click:function(a){return t.removeTrack(e.row)}}},[t._v("Remove")])],1)]}}],null,!1,2455435592)})],1)],1)],1):t._e()]),a("b-modal",{staticStyle:{"z-index":"1000"},attrs:{active:t.isAddFileActive,"has-modal-card":"","trap-focus":"",scroll:"keep"},on:{"update:active":function(e){t.isAddFileActive=e}}},[a("div",{staticClass:"card add-file-card"},[a("b-field",[a("b-upload",{attrs:{multiple:"","drag-drop":""},model:{value:t.filesToAdd,callback:function(e){t.filesToAdd=e},expression:"filesToAdd"}},[a("section",{staticClass:"section"},[a("div",{staticClass:"content has-text-centered"},[a("p",[a("b-icon",{attrs:{icon:"upload",size:"is-large"}})],1),a("p",[t._v(" Drop GPX files here or click to select. ")])])])])],1),a("div",{staticClass:"tags add-file-tags"},t._l(t.filesToAdd,(function(e,n){return a("span",{key:n,staticClass:"tag is-primary"},[t._v(" "+t._s(e.name)+" "),a("button",{staticClass:"delete is-small",attrs:{type:"button"},on:{click:function(e){return t.filesToAdd.splice(n,1)}}})])})),0),a("div",[a("b-button",{attrs:{"icon-left":"plus",type:"is-success",disabled:t.filesToAdd.length<1},on:{click:t.addFiles}},[t._v(" Add ")]),a("b-button",{staticClass:"is-pulled-right",attrs:{type:"is-danger"},on:{click:function(e){t.isAddFileActive=!1}}},[t._v(" Cancel ")])],1)],1)])],1)},O=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"progress"},[a("p",[t._v(" Loading ... ")]),a("progress",{staticClass:"progress-bar"})])}],M=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(c["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.activeTab=0,t.isOpen=!1,t.isLoading=!1,t.isAddFileActive=!1,t.filesToAdd=[],t.displayable=T,t}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"mounted",value:function(){this.gpxStore.files.length>0&&(this.isOpen=!0)}},{key:"addTrack",value:function(t){this.filesToAdd=[],this.isAddFileActive=!0,t.stopPropagation()}},{key:"removeTrack",value:function(t){this.gpxStore.remove(t)}},{key:"sizeToTrack",value:function(t){this.$emit("size-to-track",t.name)}},{key:"addFiles",value:function(){var t=this;this.isAddFileActive=!1,this.isLoading=!0,requestAnimationFrame((function(){requestAnimationFrame((function(){var e=t.filesToAdd.length;t.filesToAdd.forEach((function(a){t.gpxStore.add(a).catch((function(t){})).finally((function(){e-=1,0===e&&(t.isLoading=!1)}))}))}))}))}},{key:"infoFiles",get:function(){return this.activeTracks<1?"":this.gpxStore.files.map((function(t){return t.name})).join(", ")}},{key:"infoDateAndTime",get:function(){if(this.activeTracks<1)return"";var t=this.gpxStore.files[0].startDate,e=this.gpxStore.files[0].endDate,a=this.gpxStore.files[0].timezoneName,n=a;this.gpxStore.files.forEach((function(i){i.startDate<t&&(t=i.startDate,a=i.timezoneName),i.endDate>e&&(e=i.endDate,n=i.timezoneName)}));var i=this.displayable.date(t,a),o=this.displayable.dayOfWeek(t,a),r=this.displayable.date(e,n),s=this.displayable.dayOfWeek(e,n),c=this.displayable.shortTime(t.toISOString(),a),l=this.displayable.shortTime(e.toISOString(),n);return i===r?"".concat(o,", ").concat(i," ").concat(c," - ").concat(l):"".concat(o,", ").concat(i," ").concat(c," - ").concat(s,", ").concat(r," ").concat(l)}},{key:"infoDistance",get:function(){if(this.activeTracks<1)return"";var t=this.gpxStore.files.map((function(t){return t.meters})).reduce((function(t,e){return t+e}));return this.displayable.distanceKilometers(t/1e3)}},{key:"infoDuration",get:function(){var t=this;if(this.activeTracks<1)return"";var e=this.gpxStore.files.map((function(e){return t.displayable.durationAsSeconds(e.startDate,e.endDate)})).reduce((function(t,e){return t+e}));return this.displayable.secondsToDuration(e)}},{key:"headerText",get:function(){return this.activeTracks<1?"No tracks available":this.message}},{key:"activeTracks",get:function(){return this.gpxStore.files.length}}]),e}(f["e"]);d["a"]([Object(f["b"])("gpxStore")],M.prototype,"gpxStore",void 0),d["a"]([Object(f["c"])({required:!0})],M.prototype,"message",void 0),M=d["a"]([f["a"]],M);var A=M,L=A,C=(a("07fc"),a("cde7"),a("2877")),_=Object(C["a"])(L,S,O,!1,null,"28abee0e",null),j=_.exports,z=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(c["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.infoText="",t.defaultInfoText="",t.mapLayersControl=null,t.nameToControlLayer=new Map,t.visibleTracks=new Map,t.displayable=T,t.selectedOptions={},t.nextLineOption=0,t.lineOptions=[{color:"#008B8B",weight:5,dashArray:"",opacity:.9},{color:"#6B8E23",weight:5,dashArray:"",opacity:.9},{color:"#CD5C5C",weight:5,dashArray:"",opacity:.9},{color:"#0000FF",weight:5,dashArray:"",opacity:.7},{color:"#663399",weight:5,dashArray:"",opacity:.9},{color:"#FF69B4",weight:5,dashArray:"",opacity:.9},{color:"#00FFFF",weight:5,dashArray:"",opacity:.7},{color:"#00FF7F",weight:5,dashArray:"",opacity:.8},{color:"#DC143C",weight:5,dashArray:"",opacity:.8},{color:"#87CEFA",weight:5,dashArray:"",opacity:.8},{color:"#6A5ACD",weight:5,dashArray:"",opacity:.8},{color:"#FF4500",weight:5,dashArray:"",opacity:.8}],t}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"mounted",value:function(){this.initializeMap(),this.onTracksChanged()}},{key:"setSelectedMessage",value:function(t){this.infoText=t&&""!==t?t:this.defaultInfoText}},{key:"selectPoint",value:function(t){this.selectedPoint?this.selectedPoint.setLatLng([t.latitude,t.longitude]).addTo(this.map):this.selectedPoint=new y.a.Circle([t.latitude,t.longitude],{color:"#FF6347",opacity:.5,radius:9,fill:!0,fillColor:"#FF6347",fillOpacity:.8}).addTo(this.map)}},{key:"selectPath",value:function(t,e,a,n){t&&(t.originalEvent._gpxHandled=!0,t.originalEvent.stopImmediatePropagation()),this.selectedPoint&&this.selectedPoint.removeFrom(this.map),e!==this.selectedPath&&(this.clearSelection(),this.selectedPath=e,this.selectedOptions=a,e.setStyle({color:"#0000FF",weight:10,opacity:1})),this.setSelectedMessage(n)}},{key:"clearSelection",value:function(){this.selectedPoint&&this.selectedPoint.removeFrom(this.map),this.selectedPath&&(this.setSelectedMessage(""),this.selectedPath.setStyle(this.selectedOptions),this.selectedPath=void 0)}},{key:"sizeToTrack",value:function(t){var e=t.toString();if(this.visibleTracks.has(e)){var a=this.gpxStore.get(e);if(a){var n=y.a.latLngBounds([a.bounds.minLat,a.bounds.minLon],[a.bounds.maxLat,a.bounds.maxLon]);this.map.fitBounds(n)}}}},{key:"onTracksChanged",value:function(){var t=this,e=this.activeTracks.filter((function(e){return!t.visibleTracks.has(e.name)})),a=new Set(this.activeTracks.map((function(t){return t.name}))),n=Object(v["a"])(this.visibleTracks.keys()),i=n.filter((function(t){return!a.has(t)}));if(i.forEach((function(e){var a=t.visibleTracks.get(e);t.remove(e,a),t.visibleTracks.delete(e)})),e.forEach((function(e){var a=t.add(e);t.visibleTracks.set(e.name,a)})),this.activeTracks.length>0){var o=this.activeTracks.slice(-1)[0];this.defaultInfoText="".concat(T.dayOfWeek(o.startDate,o.timezoneName),", ")+"".concat(T.date(o.startDate,o.timezoneName),"; ")+"".concat(T.distanceMeters(o.meters),", ")+"".concat(T.durationGpx(o))}else this.defaultInfoText="";this.setSelectedMessage(this.defaultInfoText)}},{key:"remove",value:function(t,e){this.mapLayersControl&&this.nameToControlLayer.has(t)&&this.mapLayersControl.removeLayer(this.nameToControlLayer.get(t)),e.removeFrom(this.map),this.selectedPoint&&this.selectedPoint.removeFrom(this.map)}},{key:"add",value:function(t){var e=this,a=new y.a.FeatureGroup;return t.tracks.forEach((function(n,i){e.addTrack(a,t,n,i)})),a.addTo(this.map),this.addToMapLayersControl(a,t.name),this.visibleTracks.size<1&&this.map.fitBounds([[t.bounds.minLat,t.bounds.minLon],[t.bounds.maxLat,t.bounds.maxLon]],void 0),a}},{key:"addTrack",value:function(t,e,a,n){var i=this;a.segments.forEach((function(a,o){i.addSegment(t,e,n,o,a,i.lineOptions[i.nextLineOption])})),++this.nextLineOption,this.nextLineOption>=this.lineOptions.length&&(this.nextLineOption=0)}},{key:"addSegment",value:function(t,e,a,n,i,o){var r=this;new x(this.map,i,o).addTo(t);"".concat(e.name,"; track #").concat(a+1,"; segment #").concat(n+1);var s=i.points[0],c=i.points.slice(-1)[0],l="track #".concat(a+1,"; segment #").concat(n+1,"; ")+"".concat(T.timeWithSeconds(s.timestamp,i.timezoneName),", ")+"".concat(T.distanceMeters(i.meters),", ")+"".concat(T.durationPoints(s,c)),u={radius:8,weight:1,color:"#33A532",fillColor:"#33A532",fillOpacity:.8,className:"start-end-marker"},d=new y.a.Circle([i.points[0].latitude,i.points[0].longitude],u);d.addTo(t),d.on("click",(function(t){T.shortTime(i.points[0].timestamp,i.timezoneName);r.setSelectedMessage("".concat(l,"; start")),r.selectPoint(s)})),u.color="#D70025",u.fillColor="#D70025";var f=new y.a.Circle([i.points.slice(-1)[0].latitude,i.points.slice(-1)[0].longitude],u);f.addTo(t),f.on("click",(function(t){r.setSelectedMessage("".concat(l,"; end at ").concat(T.timeWithSeconds(c.timestamp,i.timezoneName))),r.selectPoint(c)}));var h=new y.a.LayerGroup,p={radius:3.5,weight:0,color:o.color,fillColor:o.color,fillOpacity:.4};i.points.forEach((function(t){var e=new y.a.Circle(new y.a.LatLng(t.latitude,t.longitude),p);e.addTo(h),e.on("click",(function(e){r.showPointInfo(i,l,t)}))}));var m=!1,v=this.map;v.on("zoomend",(function(e){v.getZoom()>16||m&&(m=!1,t.removeLayer(h))}));var g=i.points.map((function(t){return new y.a.LatLng(t.latitude,t.longitude)})),b=new y.a.Polyline(g,o);b.on("click",(function(t){var e=t,a=w.nearestPoint(i.points,e.latlng.lat,e.latlng.lng);r.selectPath(t,b,o,""),r.showPointInfo(i,l,a.point),r.selectPoint(a.point)})),b.addTo(t)}},{key:"showPointInfo",value:function(t,e,a){var n=T.timeWithSeconds(a.timestamp,t.timezoneName),i=T.shortTimezoneName(t.timezoneName);this.setSelectedMessage("".concat(e,"; [ ").concat(n," ").concat(i," ]"))}},{key:"addToMapLayersControl",value:function(t,e){null==this.mapLayersControl?this.mapLayersControl=y.a.control.layers(void 0,Object(m["a"])({},e,t),{position:"topright",collapsed:!1}).addTo(this.map):this.mapLayersControl.addOverlay(t,e),this.nameToControlLayer.set(e,t)}},{key:"initializeMap",value:function(){var t=this;this.map||(this.map=y.a.map("map",{center:[20,0],zoom:2,minZoom:2,zoomControl:!1}),y.a.control.zoom({position:"topright"}).addTo(this.map),y.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'}).addTo(this.map),y.a.control.scale({position:"bottomright"}).addTo(this.map),this.map.on("click",(function(e){var a=e;a.originalEvent&&a.originalEvent._gpxHandled||t.clearSelection()})))}},{key:"activeTracks",get:function(){return this.gpxStore.files}}]),e}(f["e"]);d["a"]([Object(f["b"])("gpxStore")],z.prototype,"gpxStore",void 0),d["a"]([Object(f["f"])("activeTracks")],z.prototype,"onTracksChanged",null),z=d["a"]([Object(f["a"])({components:{Info:j}})],z);var D=z,P=D,F=(a("5490"),a("3027"),Object(C["a"])(P,h,p,!1,null,"5b839b38",null)),N=F.exports,E=(a("c975"),a("a4d3"),a("e01a"),a("d28b"),a("a9e3"),a("083c")),I=a("e002"),R=a.n(I),G=function(){function t(){Object(r["a"])(this,t)}return Object(s["a"])(t,null,[{key:"fromGpx",value:function(t){try{return R()(t.latitude,t.longitude)}catch(e){return""}}}]),t}(),$=function(){function t(){Object(r["a"])(this,t)}return Object(s["a"])(t,[{key:"parse",value:function(t,e){var a=this;return new Promise((function(n,i){E["parseString"](e,{explicitArray:!1},(function(e,o){e&&i(e);var r={maxLat:Number(o.gpx.bounds.$.maxlat),minLat:Number(o.gpx.bounds.$.minlat),maxLon:Number(o.gpx.bounds.$.maxlon),minLon:Number(o.gpx.bounds.$.minlon)},s=[];if(Array.isArray(o.gpx.trk)){var c=!0,l=!1,u=void 0;try{for(var d,f=o.gpx.trk[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value;s.push(a.processTrack(h))}}catch(v){l=!0,u=v}finally{try{c||null==f.return||f.return()}finally{if(l)throw u}}}else s.push(a.processTrack(o.gpx.trk));var p=s[0].segments[0].points[0].timestamp,m=s.slice(-1)[0].segments.slice(-1)[0].points.slice(-1)[0].timestamp;n({tracks:s,bounds:r,name:t,startDate:p,endDate:m,meters:s.map((function(t){return t.meters})).reduce((function(t,e){return t+e})),timezoneName:s[0].segments[0].timezoneName})}))}))}},{key:"processTrack",value:function(t){var e=[];if(Array.isArray(t.trkseg)){var a=!0,n=!1,i=void 0;try{for(var o,r=t.trkseg[Symbol.iterator]();!(a=(o=r.next()).done);a=!0){var s=o.value;e=e.concat(this.processSegment(s))}}catch(c){n=!0,i=c}finally{try{a||null==r.return||r.return()}finally{if(n)throw i}}}else e=e.concat(this.processSegment(t.trkseg));return{segments:e,meters:e.map((function(t){return t.meters})).reduce((function(t,e){return t+e}))}}},{key:"processSegment",value:function(t){var e=[],a=[],n=0,i=null,o=!0,r=!1,s=void 0;try{for(var c,l=t.trkpt[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value,d={latitude:u.$.lat,longitude:u.$.lon,timestamp:new Date(u.time)};if(i){var f=(d.timestamp.getTime()-i.timestamp.getTime())/1e3;if(f>30){if(a.length>1){var h=G.fromGpx(a[0]);e.push({points:a,meters:n,timezoneName:h}),n=0}a=[]}else n+=w.distanceGpx(i,d)}a.push(d),i=d}}catch(m){r=!0,s=m}finally{try{o||null==l.return||l.return()}finally{if(r)throw s}}if(a.length>1){var p=G.fromGpx(a[0]);e.push({points:a,meters:n,timezoneName:p})}return e}}]),t}(),B=function(){function t(){Object(r["a"])(this,t),this.files=[]}return Object(s["a"])(t,[{key:"get",value:function(t){for(var e=0;e<this.files.length;++e)if(this.files[e].name===t)return this.files[e]}},{key:"add",value:function(t){var e=this;return new Promise((function(a,n){var i=new FileReader;i.onloadend=function(t){return function(){(new $).parse(t.name,i.result).then((function(t){f["e"].set(e.files,e.files.length,t),a(t)})).catch((function(t){n(t)}))}}(t),i.readAsText(t)}))}},{key:"remove",value:function(t){var e=this.files.indexOf(t);e>=0&&f["e"].delete(this.files,e)}}]),t}(),H=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(c["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.gpxStore=new B,t}return Object(u["a"])(e,t),Object(s["a"])(e,[{key:"mounted",value:function(){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(t,"px")),window.addEventListener("resize",(function(){var t=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(t,"px"))}))}}]),e}(f["e"]);d["a"]([Object(f["d"])("gpxStore")],H.prototype,"gpxStore",void 0),H=d["a"]([Object(f["a"])({components:{Map:N}})],H);var W=H,q=W,K=(a("034f"),Object(C["a"])(q,i,o,!1,null,null,null)),Z=K.exports,J=(a("becf"),a("289d"));a("5abe");n["a"].use(J["a"],{defaultIconPack:"fas"}),n["a"].config.productionTip=!1,new n["a"]({render:function(t){return t(Z)}}).$mount("#app")},cde7:function(t,e,a){"use strict";var n=a("d001"),i=a.n(n);i.a},d001:function(t,e,a){}});